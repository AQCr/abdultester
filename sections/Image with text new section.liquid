{% schema %}
{
    "name": "Image with Text",
    "settings": [
        {
            "type": "image_picker",
            "id": "image",
            "label": "Image"
        },
        {
            "type": "select",
            "id": "image_alignment",
            "label": "Image alignment",
            "options": [
                {
                    "value": "left",
                    "label": "Left"
                },
                {
                    "value": "right",
                    "label": "Right"
                }
            ],
            "default": "left"
        },
        {
            "type": "text",
            "id": "heading",
            "label": "Heading",
            "default": "Image with text"
        },
        {
            "type": "richtext",
            "id": "text",
            "label": "Text",
            "default": "<p>Pair text with an image to tell a story</p>"
        },
        {
            "type": "select",
            "id": "text_alignment",
            "label": "Text alignment",
            "options": [
                {
                    "value": "left",
                    "label": "Left"
                },
                {
                    "value": "center",
                    "label": "Center"
                },
                {
                    "value": "right",
                    "label": "Right"
                }
            ],
            "default": "left"
        }
    ],
    "presets": [
        {
            "name": "Image with Text",
            "category": "Image"
        }
    ]
}
{% endschema %}

<div class="image-with-text{% if section.settings.image_alignment == 'right' %} image-right{% endif %}">
    <div class="container">
        <div class="image-with-text__grid">
            <div class="image-with-text__image-wrapper">
                {% if section.settings.image %}
                    {{ section.settings.image | image_url: width: 800 | image_tag: 
                        loading: 'lazy',
                        class: 'image-with-text__image'
                    }}
                {% else %}
                    {{ 'image' | placeholder_svg_tag: 'placeholder-svg' }}
                {% endif %}
            </div>
            <div class="image-with-text__text-wrapper" style="text-align: {{ section.settings.text_alignment }};">
                {% if section.settings.heading != blank %}
                    <h2 class="image-with-text__heading">{{ section.settings.heading }}</h2>
                {% endif %}
                {% if section.settings.text != blank %}
                    <div class="image-with-text__text">{{ section.settings.text }}</div>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<style>
.image-with-text {
    padding: 60px 0;
}

.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
}

.image-with-text__grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 40px;
    align-items: center;
}

.image-right .image-with-text__grid {
    grid-template-areas: "text image";
}

.image-with-text__image-wrapper {
    grid-area: image;
}

.image-with-text__text-wrapper {
    grid-area: text;
}

.image-with-text__image {
    width: 100%;
    height: auto;
    display: block;
}

.image-with-text__heading {
    margin: 0 0 20px;
    font-size: 32px;
}

.image-with-text__text {
    font-size: 16px;
    line-height: 1.5;
}

@media screen and (max-width: 768px) {
    .image-with-text__grid {
        grid-template-columns: 1fr;
        gap: 20px;
    }
    
    .image-right .image-with-text__grid {
        grid-template-areas: 
            "image"
            "text";
    }
}
</style>